<% new_record = @cms_contentitem.new_record? %>
<% submit_url = (new_record ? create_content_admin_cms_contentitem_path(@current_page) : admin_cms_contentitem_path(@cms_contentitem)) %>
<% title = (new_record ? "New Content" : @cms_contentitem.container.capitalize) %>

<%= simple_form_for @cms_contentitem, url: submit_url,
    html: { class: 'form-horizontal' }, wrapper: :bs3_horizontal_form, wrapper_mappings: DmAdmin::FormWrapperMappings do |f| %>

  <%= f.error_notification message: "Please review the problems below" %>
  <%= f.hidden_field :original_updated_on %>
  <%= panel title: title do %>
    <%= locale_tabs  do |locale| %>
      <%= f.input "content_#{locale}", label: 'Content', wrapper: :bs3_vertical_form, as: :code_editor, mode: @cms_contentitem.itemtype, input_html: {style: "height: 400px;"} %>
    <% end %>
    <div class="row">
      <div class="col-md-4">
        <%= f.input :itemtype, label: 'Item Type', collection: CmsContentitem::CONTENT_TYPES, include_blank: false, wrapper: :bs3_vertical_form %>
      </div>
      <div class="col-md-4">
        <%= f.input :container, label: 'Content Name', hint: 'This is normally "body" or "sidebar" or something', wrapper: :bs3_vertical_form %>
      </div>
      <div class="col-md-4">
        <%= f.input :enable_cache, as: :boolean, label: 'Cache Content', wrapper: :bs3_vertical_form %>
      </div>
    </div>
      
    <%= submit_or_cancel cancel_url: admin_cms_page_url(@current_page) %>
  <% end %>
<% end %>

<%= render partial: 'sidebar' %>
<%= render partial: 'dm_cms/admin/shared/liquid_tags_ref' %>

